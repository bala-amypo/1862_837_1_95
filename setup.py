import os

files = {
    "pom.xml": '<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n\txsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">\n\t<modelVersion>4.0.0</modelVersion>\n\t<parent>\n\t\t<groupId>org.springframework.boot</groupId>\n\t\t<artifactId>spring-boot-starter-parent</artifactId>\n\t\t<version>3.2.1</version>\n\t\t<relativePath/> <!-- lookup parent from repository -->\n\t</parent>\n\t<groupId>com.example</groupId>\n\t<artifactId>demo</artifactId>\n\t<version>0.0.1-SNAPSHOT</version>\n\t<name>demo</name>\n\t<description>Demo project for Spring Boot</description>\n\t<url/>\n\t<licenses>\n\t\t<license/>\n\t</licenses>\n\t<developers>\n\t\t<developer/>\n\t</developers>\n\t<scm>\n\t\t<connection/>\n\t\t<developerConnection/>\n\t\t<tag/>\n\t\t<url/>\n\t</scm>\n\t<properties>\n\t\t<java.version>17</java.version>\n\t</properties>\n\t<dependencies>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-data-jpa</artifactId>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-security</artifactId>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-web</artifactId>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-validation</artifactId>\n\t\t</dependency>\n\n\t\t<dependency>\n\t\t\t<groupId>com.mysql</groupId>\n\t\t\t<artifactId>mysql-connector-j</artifactId>\n\t\t\t<scope>runtime</scope>\n\t\t</dependency>\n\t\t\n\t\t<!-- JWT -->\n\t\t<dependency>\n\t\t\t<groupId>io.jsonwebtoken</groupId>\n\t\t\t<artifactId>jjwt-api</artifactId>\n\t\t\t<version>0.11.5</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>io.jsonwebtoken</groupId>\n\t\t\t<artifactId>jjwt-impl</artifactId>\n\t\t\t<version>0.11.5</version>\n\t\t\t<scope>runtime</scope>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>io.jsonwebtoken</groupId>\n\t\t\t<artifactId>jjwt-jackson</artifactId>\n\t\t\t<version>0.11.5</version>\n\t\t\t<scope>runtime</scope>\n\t\t</dependency>\n\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-tomcat</artifactId>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-test</artifactId>\n\t\t\t<scope>test</scope>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.security</groupId>\n\t\t\t<artifactId>spring-security-test</artifactId>\n\t\t\t<scope>test</scope>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springdoc</groupId>\n\t\t\t<artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>\n\t\t\t<version>2.3.0</version>\n\t\t</dependency>\n\t</dependencies>\n\n\t<build>\n\t\t<plugins>\n\t\t\t<plugin>\n\t\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t\t<artifactId>spring-boot-maven-plugin</artifactId>\n\t\t\t</plugin>\n\t\t</plugins>\n\t</build>\n\n</project>',
    "src/main/resources/application.properties": 'spring.application.name=demo\n\nspring.datasource.url=jdbc:mysql://localhost:3306/demo_db?createDatabaseIfNotExist=true&useSSL=false\nspring.datasource.username=root\nspring.datasource.password=hello\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\n\n# JWT\napp.jwtSecret=SecretKeyToGenJWTsSecretKeyToGenJWTsSecretKeyToGenJWTs\napp.jwtExpirationInMs=604800000\n\nspringdoc.api-docs.path=/v3/api-docs\nspringdoc.swagger-ui.path=/swagger-ui.html',
    "src/main/java/com/example/demo/model/User.java": 'package com.example.demo.model;\n\nimport jakarta.persistence.*;\nimport java.util.List;\n\n@Entity\n@Table(name = "users")\npublic class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String name;\n\n    @Column(unique = true)\n    private String email;\n\n    private String password;\n\n    private String role; // "USER" or "ADMIN"\n\n    @OneToMany(mappedBy = "user")\n    private List<TransactionLog> transactionLogs;\n\n    @OneToMany(mappedBy = "user")\n    private List<BudgetPlan> budgetPlans;\n\n    public User() {\n    }\n\n    public User(Long id, String name, String email, String password, String role) {\n        this.id = id;\n        this.name = name;\n        this.email = email;\n        this.password = password;\n        this.role = role;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public String getRole() {\n        return role;\n    }\n\n    public void setRole(String role) {\n        this.role = role;\n    }\n\n    public List<TransactionLog> getTransactionLogs() {\n        return transactionLogs;\n    }\n\n    public void setTransactionLogs(List<TransactionLog> transactionLogs) {\n        this.transactionLogs = transactionLogs;\n    }\n\n    public List<BudgetPlan> getBudgetPlans() {\n        return budgetPlans;\n    }\n\n    public void setBudgetPlans(List<BudgetPlan> budgetPlans) {\n        this.budgetPlans = budgetPlans;\n    }\n}\n',
    "src/main/java/com/example/demo/model/Category.java": 'package com.example.demo.model;\n\nimport jakarta.persistence.*;\nimport java.util.List;\n\n@Entity\n@Table(name = "categories")\npublic class Category {\n\n    public static final String TYPE_INCOME = "INCOME";\n    public static final String TYPE_EXPENSE = "EXPENSE";\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(unique = true)\n    private String name;\n\n    private String type;\n\n    @OneToMany(mappedBy = "category")\n    private List<TransactionLog> transactionLogs;\n\n    public Category() {\n    }\n\n    public Category(Long id, String name, String type) {\n        this.id = id;\n        this.name = name;\n        this.type = type;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getType() {\n        return type;\n    }\n\n    public void setType(String type) {\n        this.type = type;\n    }\n\n    public List<TransactionLog> getTransactionLogs() {\n        return transactionLogs;\n    }\n\n    public void setTransactionLogs(List<TransactionLog> transactionLogs) {\n        this.transactionLogs = transactionLogs;\n    }\n}\n',
    "src/main/java/com/example/demo/model/TransactionLog.java": 'package com.example.demo.model;\n\nimport jakarta.persistence.*;\nimport java.time.LocalDate;\n\n@Entity\n@Table(name = "transaction_logs")\npublic class TransactionLog {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ManyToOne\n    @JoinColumn(name = "user_id")\n    private User user;\n\n    @ManyToOne\n    @JoinColumn(name = "category_id")\n    private Category category;\n\n    private Double amount;\n\n    private String description;\n\n    private LocalDate transactionDate;\n\n    public TransactionLog() {\n    }\n\n    public TransactionLog(Long id, User user, Category category, Double amount, String description, LocalDate transactionDate) {\n        this.id = id;\n        this.user = user;\n        this.category = category;\n        this.amount = amount;\n        this.description = description;\n        this.transactionDate = transactionDate;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public User getUser() {\n        return user;\n    }\n\n    public void setUser(User user) {\n        this.user = user;\n    }\n\n    public Category getCategory() {\n        return category;\n    }\n\n    public void setCategory(Category category) {\n        this.category = category;\n    }\n\n    public Double getAmount() {\n        return amount;\n    }\n\n    public void setAmount(Double amount) {\n        this.amount = amount;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public LocalDate getTransactionDate() {\n        return transactionDate;\n    }\n\n    public void setTransactionDate(LocalDate transactionDate) {\n        this.transactionDate = transactionDate;\n    }\n}\n',
    "src/main/java/com/example/demo/model/BudgetPlan.java": 'package com.example.demo.model;\n\nimport jakarta.persistence.*;\n\n@Entity\n@Table(name = "budget_plans")\npublic class BudgetPlan {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ManyToOne\n    @JoinColumn(name = "user_id")\n    private User user;\n\n    private Integer month;\n\n    @Column(name = "`year`")\n    private Integer year;\n\n    private Double incomeTarget;\n\n    private Double expenseLimit;\n\n    @OneToOne(mappedBy = "budgetPlan")\n    private BudgetSummary budgetSummary;\n\n    public BudgetPlan() {\n    }\n\n    public BudgetPlan(Long id, User user, Integer month, Integer year, Double incomeTarget, Double expenseLimit) {\n        this.id = id;\n        this.user = user;\n        this.month = month;\n        this.year = year;\n        this.incomeTarget = incomeTarget;\n        this.expenseLimit = expenseLimit;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public User getUser() {\n        return user;\n    }\n\n    public void setUser(User user) {\n        this.user = user;\n    }\n\n    public Integer getMonth() {\n        return month;\n    }\n\n    public void setMonth(Integer month) {\n        this.month = month;\n    }\n\n    public Integer getYear() {\n        return year;\n    }\n\n    public void setYear(Integer year) {\n        this.year = year;\n    }\n\n    public Double getIncomeTarget() {\n        return incomeTarget;\n    }\n\n    public void setIncomeTarget(Double incomeTarget) {\n        this.incomeTarget = incomeTarget;\n    }\n\n    public Double getExpenseLimit() {\n        return expenseLimit;\n    }\n\n    public void setExpenseLimit(Double expenseLimit) {\n        this.expenseLimit = expenseLimit;\n    }\n\n    public BudgetSummary getBudgetSummary() {\n        return budgetSummary;\n    }\n\n    public void setBudgetSummary(BudgetSummary budgetSummary) {\n        this.budgetSummary = budgetSummary;\n    }\n}\n',
    "src/main/java/com/example/demo/model/BudgetSummary.java": 'package com.example.demo.model;\n\nimport jakarta.persistence.*;\nimport java.time.LocalDateTime;\n\n@Entity\n@Table(name = "budget_summaries")\npublic class BudgetSummary {\n\n    public static final String STATUS_UNDER_LIMIT = "UNDER_LIMIT";\n    public static final String STATUS_OVER_LIMIT = "OVER_LIMIT";\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @OneToOne\n    @JoinColumn(name = "budget_plan_id")\n    private BudgetPlan budgetPlan;\n\n    private Double totalIncome;\n\n    private Double totalExpense;\n\n    private String status;\n\n    private LocalDateTime generatedAt;\n\n    public BudgetSummary() {\n    }\n\n    public BudgetSummary(Long id, BudgetPlan budgetPlan, Double totalIncome, Double totalExpense, String status, LocalDateTime generatedAt) {\n        this.id = id;\n        this.budgetPlan = budgetPlan;\n        this.totalIncome = totalIncome;\n        this.totalExpense = totalExpense;\n        this.status = status;\n        this.generatedAt = generatedAt;\n    }\n\n    @PrePersist\n    public void onCreate() {\n        if (this.generatedAt == null) {\n            this.generatedAt = LocalDateTime.now();\n        }\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public BudgetPlan getBudgetPlan() {\n        return budgetPlan;\n    }\n\n    public void setBudgetPlan(BudgetPlan budgetPlan) {\n        this.budgetPlan = budgetPlan;\n    }\n\n    public Double getTotalIncome() {\n        return totalIncome;\n    }\n\n    public void setTotalIncome(Double totalIncome) {\n        this.totalIncome = totalIncome;\n    }\n\n    public Double getTotalExpense() {\n        return totalExpense;\n    }\n\n    public void setTotalExpense(Double totalExpense) {\n        this.totalExpense = totalExpense;\n    }\n\n    public String getStatus() {\n        return status;\n    }\n\n    public void setStatus(String status) {\n        this.status = status;\n    }\n\n    public LocalDateTime getGeneratedAt() {\n        return generatedAt;\n    }\n\n    public void setGeneratedAt(LocalDateTime generatedAt) {\n        this.generatedAt = generatedAt;\n    }\n}\n',
    "src/main/java/com/example/demo/repository/UserRepository.java": 'package com.example.demo.repository;\n\nimport com.example.demo.model.User;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface UserRepository extends JpaRepository<User, Long> {\n    boolean existsByEmail(String email);\n    // Needed for Auth\n    java.util.Optional<User> findByEmail(String email);\n}\n',
    "src/main/java/com/example/demo/repository/CategoryRepository.java": 'package com.example.demo.repository;\n\nimport com.example.demo.model.Category;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\nimport java.util.List;\n\n@Repository\npublic interface CategoryRepository extends JpaRepository<Category, Long> {\n    boolean existsByName(String name);\n    List<Category> findAll();\n}\n',
    "src/main/java/com/example/demo/repository/TransactionLogRepository.java": 'package com.example.demo.repository;\n\nimport com.example.demo.model.TransactionLog;\nimport com.example.demo.model.User;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\nimport java.time.LocalDate;\nimport java.util.List;\n\n@Repository\npublic interface TransactionLogRepository extends JpaRepository<TransactionLog, Long> {\n    List<TransactionLog> findByUser(User user);\n    List<TransactionLog> findByUserAndTransactionDateBetween(User user, LocalDate start, LocalDate end);\n}\n',
    "src/main/java/com/example/demo/repository/BudgetPlanRepository.java": 'package com.example.demo.repository;\n\nimport com.example.demo.model.BudgetPlan;\nimport com.example.demo.model.User;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\nimport java.util.Optional;\n\n@Repository\npublic interface BudgetPlanRepository extends JpaRepository<BudgetPlan, Long> {\n    Optional<BudgetPlan> findByUserAndMonthAndYear(User user, Integer month, Integer year);\n}\n',
    "src/main/java/com/example/demo/repository/BudgetSummaryRepository.java": 'package com.example.demo.repository;\n\nimport com.example.demo.model.BudgetPlan;\nimport com.example.demo.model.BudgetSummary;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\nimport java.util.Optional;\n\n@Repository\npublic interface BudgetSummaryRepository extends JpaRepository<BudgetSummary, Long> {\n    Optional<BudgetSummary> findByBudgetPlan(BudgetPlan plan);\n}\n',
    "src/main/java/com/example/demo/dto/LoginRequest.java": 'package com.example.demo.dto;\n\npublic class LoginRequest {\n    private String email;\n    private String password;\n\n    public LoginRequest() {}\n\n    public LoginRequest(String email, String password) {\n        this.email = email;\n        this.password = password;\n    }\n\n    public String getEmail() { return email; }\n    public void setEmail(String email) { this.email = email; }\n\n    public String getPassword() { return password; }\n    public void setPassword(String password) { this.password = password; }\n}\n',
    "src/main/java/com/example/demo/dto/RegisterRequest.java": 'package com.example.demo.dto;\n\npublic class RegisterRequest {\n    private String name;\n    private String email;\n    private String password;\n\n    public RegisterRequest() {}\n\n    public RegisterRequest(String name, String email, String password) {\n        this.name = name;\n        this.email = email;\n        this.password = password;\n    }\n\n    public String getName() { return name; }\n    public void setName(String name) { this.name = name; }\n\n    public String getEmail() { return email; }\n    public void setEmail(String email) { this.email = email; }\n\n    public String getPassword() { return password; }\n    public void setPassword(String password) { this.password = password; }\n}\n',
    "src/main/java/com/example/demo/dto/AuthResponse.java": 'package com.example.demo.dto;\n\npublic class AuthResponse {\n    private String accessToken;\n    private String tokenType = "Bearer";\n\n    public AuthResponse(String accessToken) {\n        this.accessToken = accessToken;\n    }\n\n    public String getAccessToken() { return accessToken; }\n    public void setAccessToken(String accessToken) { this.accessToken = accessToken; }\n\n    public String getTokenType() { return tokenType; }\n    public void setTokenType(String tokenType) { this.tokenType = tokenType; }\n}\n',
    "src/main/java/com/example/demo/exception/BadRequestException.java": 'package com.example.demo.exception;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.web.bind.annotation.ResponseStatus;\n\n@ResponseStatus(HttpStatus.BAD_REQUEST)\npublic class BadRequestException extends RuntimeException {\n    public BadRequestException(String message) {\n        super(message);\n    }\n}\n',
    "src/main/java/com/example/demo/exception/ConflictException.java": 'package com.example.demo.exception;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.web.bind.annotation.ResponseStatus;\n\n@ResponseStatus(HttpStatus.CONFLICT)\npublic class ConflictException extends RuntimeException {\n    public ConflictException(String message) {\n        super(message);\n    }\n}\n',
    "src/main/java/com/example/demo/exception/GlobalExceptionHandler.java": 'package com.example.demo.exception;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.ControllerAdvice;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.context.request.WebRequest;\n\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@ControllerAdvice\npublic class GlobalExceptionHandler {\n\n    @ExceptionHandler(BadRequestException.class)\n    public ResponseEntity<?> handleBadRequestException(BadRequestException ex, WebRequest request) {\n        Map<String, Object> body = new HashMap<>();\n        body.put("timestamp", new Date());\n        body.put("status", HttpStatus.BAD_REQUEST.value());\n        body.put("error", "Bad Request");\n        body.put("message", ex.getMessage());\n        body.put("path", request.getDescription(false));\n        return new ResponseEntity<>(body, HttpStatus.BAD_REQUEST);\n    }\n\n    @ExceptionHandler(ConflictException.class)\n    public ResponseEntity<?> handleConflictException(ConflictException ex, WebRequest request) {\n        Map<String, Object> body = new HashMap<>();\n        body.put("timestamp", new Date());\n        body.put("status", HttpStatus.CONFLICT.value());\n        body.put("error", "Conflict");\n        body.put("message", ex.getMessage());\n        body.put("path", request.getDescription(false));\n        return new ResponseEntity<>(body, HttpStatus.CONFLICT);\n    }\n\n    @ExceptionHandler(Exception.class)\n    public ResponseEntity<?> handleGlobalException(Exception ex, WebRequest request) {\n        Map<String, Object> body = new HashMap<>();\n        body.put("timestamp", new Date());\n        body.put("status", HttpStatus.INTERNAL_SERVER_ERROR.value());\n        body.put("error", "Internal Server Error");\n        body.put("message", ex.getMessage());\n        body.put("path", request.getDescription(false));\n        return new ResponseEntity<>(body, HttpStatus.INTERNAL_SERVER_ERROR);\n    }\n}\n',
    "src/main/java/com/example/demo/security/CustomUserDetailsService.java": 'package com.example.demo.security;\n\nimport com.example.demo.model.User;\nimport com.example.demo.repository.UserRepository;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.stereotype.Service;\nimport java.util.Collections;\n\n@Service\npublic class CustomUserDetailsService implements UserDetailsService {\n\n    private final UserRepository userRepository;\n\n    public CustomUserDetailsService(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String email) throws UsernameNotFoundException {\n        User user = userRepository.findByEmail(email)\n                .orElseThrow(() -> new UsernameNotFoundException("User not found with email: " + email));\n\n        return new org.springframework.security.core.userdetails.User(\n                user.getEmail(),\n                user.getPassword(),\n                Collections.singletonList(new SimpleGrantedAuthority("ROLE_" + user.getRole()))\n        );\n    }\n}\n',
    "src/main/java/com/example/demo/security/JwtTokenProvider.java": 'package com.example.demo.security;\n\nimport io.jsonwebtoken.*;\nimport io.jsonwebtoken.security.Keys;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.stereotype.Component;\n\nimport java.security.Key;\nimport java.util.Date;\nimport java.nio.charset.StandardCharsets;\n\n@Component\npublic class JwtTokenProvider {\n\n    @Value("${app.jwtSecret}")\n    private String jwtSecret;\n\n    @Value("${app.jwtExpirationInMs}")\n    private int jwtExpirationInMs;\n\n    private Key getSigningKey() {\n        byte[] keyBytes = jwtSecret.getBytes(StandardCharsets.UTF_8);\n        return Keys.hmacShaKeyFor(keyBytes);\n    }\n\n    public String generateToken(Authentication authentication) {\n        UserDetails userPrincipal = (UserDetails) authentication.getPrincipal();\n        Date now = new Date();\n        Date expiryDate = new Date(now.getTime() + jwtExpirationInMs);\n\n        return Jwts.builder()\n                .setSubject(userPrincipal.getUsername())\n                .setIssuedAt(new Date())\n                .setExpiration(expiryDate)\n                .signWith(getSigningKey(), SignatureAlgorithm.HS512)\n                .compact();\n    }\n\n    public String getUserUsernameFromJWT(String token) {\n        Claims claims = Jwts.parserBuilder()\n                .setSigningKey(getSigningKey())\n                .build()\n                .parseClaimsJws(token)\n                .getBody();\n\n        return claims.getSubject();\n    }\n\n    public boolean validateToken(String authToken) {\n        try {\n            Jwts.parserBuilder().setSigningKey(getSigningKey()).build().parseClaimsJws(authToken);\n            return true;\n        } catch (JwtException | IllegalArgumentException ex) {\n            // Log exception\n        }\n        return false;\n    }\n}\n',
    "src/main/java/com/example/demo/security/JwtAuthenticationFilter.java": 'package com.example.demo.security;\n\nimport jakarta.servlet.FilterChain;\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.web.authentication.WebAuthenticationDetailsSource;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.filter.OncePerRequestFilter;\nimport org.springframework.util.StringUtils;\n\nimport java.io.IOException;\n\n@Component\npublic class JwtAuthenticationFilter extends OncePerRequestFilter {\n\n    @Autowired\n    private JwtTokenProvider tokenProvider;\n\n    @Autowired\n    private CustomUserDetailsService customUserDetailsService;\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n        String jwt = getJwtFromRequest(request);\n\n        if (StringUtils.hasText(jwt) && tokenProvider.validateToken(jwt)) {\n            String username = tokenProvider.getUserUsernameFromJWT(jwt);\n\n            UserDetails userDetails = customUserDetailsService.loadUserByUsername(username);\n            UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(\n                    userDetails, null, userDetails.getAuthorities());\n            authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n\n            SecurityContextHolder.getContext().setAuthentication(authentication);\n        }\n\n        filterChain.doFilter(request, response);\n    }\n\n    private String getJwtFromRequest(HttpServletRequest request) {\n        String bearerToken = request.getHeader("Authorization");\n        if (StringUtils.hasText(bearerToken) && bearerToken.startsWith("Bearer ")) {\n            return bearerToken.substring(7);\n        }\n        return null;\n    }\n}\n',
    "src/main/java/com/example/demo/config/SecurityConfig.java": 'package com.example.demo.config;\n\nimport com.example.demo.security.CustomUserDetailsService;\nimport com.example.demo.security.JwtAuthenticationFilter;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\n\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n    private final CustomUserDetailsService userDetailsService;\n    private final JwtAuthenticationFilter jwtAuthenticationFilter;\n\n    public SecurityConfig(CustomUserDetailsService userDetailsService, JwtAuthenticationFilter jwtAuthenticationFilter) {\n        this.userDetailsService = userDetailsService;\n        this.jwtAuthenticationFilter = jwtAuthenticationFilter;\n    }\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n            .csrf(csrf -> csrf.disable())\n            .sessionManagement(session -> session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n            .authorizeHttpRequests(auth -> auth\n                .requestMatchers("/api/auth/**").permitAll()\n                .requestMatchers("/v3/api-docs/**", "/swagger-ui/**", "/swagger-ui.html").permitAll()\n                .requestMatchers("/simple-hello").permitAll() // Allow servlet\n                .anyRequest().authenticated()\n            );\n\n        http.addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);\n\n        return http.build();\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n}\n',
    "src/main/java/com/example/demo/service/UserService.java": 'package com.example.demo.service;\n\nimport com.example.demo.model.User;\n\npublic interface UserService {\n    User register(User user);\n    User findByEmail(String email);\n}\n',
    "src/main/java/com/example/demo/service/CategoryService.java": 'package com.example.demo.service;\n\nimport com.example.demo.model.Category;\nimport java.util.List;\n\npublic interface CategoryService {\n    Category addCategory(Category category);\n    List<Category> getAllCategories();\n}\n',
    "src/main/java/com/example/demo/service/TransactionService.java": 'package com.example.demo.service;\n\nimport com.example.demo.model.TransactionLog;\nimport java.util.List;\n\npublic interface TransactionService {\n    TransactionLog addTransaction(Long userId, TransactionLog log);\n    List<TransactionLog> getUserTransactions(Long userId);\n}\n',
    "src/main/java/com/example/demo/service/BudgetPlanService.java": 'package com.example.demo.service;\n\nimport com.example.demo.model.BudgetPlan;\n\npublic interface BudgetPlanService {\n    BudgetPlan createBudgetPlan(Long userId, BudgetPlan plan);\n    BudgetPlan getBudgetPlan(Long userId, Integer month, Integer year);\n}\n',
    "src/main/java/com/example/demo/service/BudgetSummaryService.java": 'package com.example.demo.service;\n\nimport com.example.demo.model.BudgetSummary;\n\npublic interface BudgetSummaryService {\n    BudgetSummary generateSummary(Long budgetPlanId);\n    BudgetSummary getSummary(Long budgetPlanId);\n}\n',
    "src/main/java/com/example/demo/service/impl/UserServiceImpl.java": 'package com.example.demo.service.impl;\n\nimport com.example.demo.exception.BadRequestException;\nimport com.example.demo.exception.ConflictException;\nimport com.example.demo.model.User;\nimport com.example.demo.repository.UserRepository;\nimport com.example.demo.service.UserService;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class UserServiceImpl implements UserService {\n\n    private final UserRepository userRepository;\n    private final PasswordEncoder passwordEncoder;\n\n    public UserServiceImpl(UserRepository userRepository, PasswordEncoder passwordEncoder) {\n        this.userRepository = userRepository;\n        this.passwordEncoder = passwordEncoder;\n    }\n\n    @Override\n    public User register(User user) {\n        if (userRepository.existsByEmail(user.getEmail())) {\n            throw new ConflictException("Email already exists");\n        }\n\n        user.setPassword(passwordEncoder.encode(user.getPassword()));\n        if (user.getRole() == null || user.getRole().isEmpty()) {\n            user.setRole("USER");\n        }\n\n        return userRepository.save(user);\n    }\n\n    @Override\n    public User findByEmail(String email) {\n        return userRepository.findByEmail(email)\n                .orElseThrow(() -> new BadRequestException("User not found with email: " + email));\n    }\n}\n',
    "src/main/java/com/example/demo/service/impl/CategoryServiceImpl.java": 'package com.example.demo.service.impl;\n\nimport com.example.demo.exception.BadRequestException;\nimport com.example.demo.model.Category;\nimport com.example.demo.repository.CategoryRepository;\nimport com.example.demo.service.CategoryService;\nimport org.springframework.stereotype.Service;\nimport java.util.List;\n\n@Service\npublic class CategoryServiceImpl implements CategoryService {\n\n    private final CategoryRepository categoryRepository;\n\n    public CategoryServiceImpl(CategoryRepository categoryRepository) {\n        this.categoryRepository = categoryRepository;\n    }\n\n    @Override\n    public Category addCategory(Category category) {\n        if (categoryRepository.existsByName(category.getName())) {\n            throw new BadRequestException("Category already exists");\n        }\n        validateType(category.getType());\n        return categoryRepository.save(category);\n    }\n\n    @Override\n    public List<Category> getAllCategories() {\n        return categoryRepository.findAll();\n    }\n\n    private void validateType(String type) {\n        if (!Category.TYPE_INCOME.equals(type) && !Category.TYPE_EXPENSE.equals(type)) {\n            throw new BadRequestException("Invalid category type");\n        }\n    }\n}\n',
    "src/main/java/com/example/demo/service/impl/TransactionServiceImpl.java": 'package com.example.demo.service.impl;\n\nimport com.example.demo.exception.BadRequestException;\nimport com.example.demo.model.Category;\nimport com.example.demo.model.TransactionLog;\nimport com.example.demo.model.User;\nimport com.example.demo.repository.TransactionLogRepository;\nimport com.example.demo.repository.UserRepository;\nimport com.example.demo.service.TransactionService;\nimport org.springframework.stereotype.Service;\n\nimport java.time.LocalDate;\nimport java.util.List;\n\n@Service\npublic class TransactionServiceImpl implements TransactionService {\n\n    private final TransactionLogRepository transactionLogRepository;\n    private final UserRepository userRepository;\n\n    public TransactionServiceImpl(TransactionLogRepository transactionLogRepository, UserRepository userRepository) {\n        this.transactionLogRepository = transactionLogRepository;\n        this.userRepository = userRepository;\n    }\n\n    @Override\n    public TransactionLog addTransaction(Long userId, TransactionLog log) {\n        User user = userRepository.findById(userId)\n                .orElseThrow(() -> new BadRequestException("User not found"));\n        \n        if (log.getAmount() <= 0) {\n            throw new BadRequestException("Amount must be greater than 0");\n        }\n        if (log.getTransactionDate().isAfter(LocalDate.now())) {\n            throw new BadRequestException("Date cannot be in the future");\n        }\n\n        log.setUser(user);\n        return transactionLogRepository.save(log);\n    }\n\n    @Override\n    public List<TransactionLog> getUserTransactions(Long userId) {\n        User user = userRepository.findById(userId)\n                .orElseThrow(() -> new BadRequestException("User not found"));\n        return transactionLogRepository.findByUser(user);\n    }\n}\n',
    "src/main/java/com/example/demo/service/impl/BudgetPlanServiceImpl.java": 'package com.example.demo.service.impl;\n\nimport com.example.demo.exception.BadRequestException;\nimport com.example.demo.model.BudgetPlan;\nimport com.example.demo.model.User;\nimport com.example.demo.repository.BudgetPlanRepository;\nimport com.example.demo.repository.UserRepository;\nimport com.example.demo.service.BudgetPlanService;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class BudgetPlanServiceImpl implements BudgetPlanService {\n\n    private final BudgetPlanRepository budgetPlanRepository;\n    private final UserRepository userRepository;\n\n    public BudgetPlanServiceImpl(BudgetPlanRepository budgetPlanRepository, UserRepository userRepository) {\n        this.budgetPlanRepository = budgetPlanRepository;\n        this.userRepository = userRepository;\n    }\n\n    @Override\n    public BudgetPlan createBudgetPlan(Long userId, BudgetPlan plan) {\n        User user = userRepository.findById(userId)\n                .orElseThrow(() -> new BadRequestException("User not found"));\n\n        if (plan.getMonth() < 1 || plan.getMonth() > 12) {\n            throw new BadRequestException("Invalid month");\n        }\n        if (plan.getIncomeTarget() < 0 || plan.getExpenseLimit() < 0) {\n            throw new BadRequestException("Targets must be non-negative");\n        }\n\n        if (budgetPlanRepository.findByUserAndMonthAndYear(user, plan.getMonth(), plan.getYear()).isPresent()) {\n            throw new BadRequestException("Budget plan already exists for this period");\n        }\n\n        plan.setUser(user);\n        return budgetPlanRepository.save(plan);\n    }\n\n    @Override\n    public BudgetPlan getBudgetPlan(Long userId, Integer month, Integer year) {\n        User user = userRepository.findById(userId)\n                .orElseThrow(() -> new BadRequestException("User not found"));\n        return budgetPlanRepository.findByUserAndMonthAndYear(user, month, year)\n                .orElseThrow(() -> new BadRequestException("Budget plan not found"));\n    }\n}\n',
    "src/main/java/com/example/demo/service/impl/BudgetSummaryServiceImpl.java": 'package com.example.demo.service.impl;\n\nimport com.example.demo.exception.BadRequestException;\nimport com.example.demo.model.BudgetPlan;\nimport com.example.demo.model.BudgetSummary;\nimport com.example.demo.model.Category;\nimport com.example.demo.model.TransactionLog;\nimport com.example.demo.repository.BudgetPlanRepository;\nimport com.example.demo.repository.BudgetSummaryRepository;\nimport com.example.demo.repository.TransactionLogRepository;\nimport com.example.demo.service.BudgetSummaryService;\nimport org.springframework.stereotype.Service;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@Service\npublic class BudgetSummaryServiceImpl implements BudgetSummaryService {\n\n    private final BudgetSummaryRepository budgetSummaryRepository;\n    private final BudgetPlanRepository budgetPlanRepository;\n    private final TransactionLogRepository transactionLogRepository;\n\n    public BudgetSummaryServiceImpl(BudgetSummaryRepository budgetSummaryRepository,\n                                    BudgetPlanRepository budgetPlanRepository,\n                                    TransactionLogRepository transactionLogRepository) {\n        this.budgetSummaryRepository = budgetSummaryRepository;\n        this.budgetPlanRepository = budgetPlanRepository;\n        this.transactionLogRepository = transactionLogRepository;\n    }\n\n    @Override\n    public BudgetSummary generateSummary(Long budgetPlanId) {\n        BudgetPlan plan = budgetPlanRepository.findById(budgetPlanId)\n                .orElseThrow(() -> new BadRequestException("Budget Plan not found"));\n\n        LocalDate start = LocalDate.of(plan.getYear(), plan.getMonth(), 1);\n        LocalDate end = start.withDayOfMonth(start.lengthOfMonth());\n\n        List<TransactionLog> logs = transactionLogRepository.findByUserAndTransactionDateBetween(plan.getUser(), start, end);\n\n        double totalIncome = logs.stream()\n                .filter(l -> Category.TYPE_INCOME.equals(l.getCategory().getType()))\n                .mapToDouble(TransactionLog::getAmount)\n                .sum();\n\n        double totalExpense = logs.stream()\n                .filter(l -> Category.TYPE_EXPENSE.equals(l.getCategory().getType()))\n                .mapToDouble(TransactionLog::getAmount)\n                .sum();\n\n        BudgetSummary summary = budgetSummaryRepository.findByBudgetPlan(plan)\n                .orElse(new BudgetSummary());\n\n        summary.setBudgetPlan(plan);\n        summary.setTotalIncome(totalIncome);\n        summary.setTotalExpense(totalExpense);\n        summary.setStatus(totalExpense > plan.getExpenseLimit() ? BudgetSummary.STATUS_OVER_LIMIT : BudgetSummary.STATUS_UNDER_LIMIT);\n        \n        // If it\'s a new entity, generatedAt will be set by @PrePersist. \n        // If updating, we might want to update the timestamp or leave it?\n        // Spec says: "Lifecycle method onCreate() initializes generatedAt when the entity is first persisted."\n        // It doesn\'t explicitly say to update it on re-generation. \n        // But usually "generate" implies fresh data. I will explicitly set it to now if it\'s an update, or let @PrePersist handle it for new.\n        // Actually, @PrePersist only runs on persist (insert). \n        // I will set it manually to ensure it reflects the latest generation time.\n        summary.setGeneratedAt(LocalDateTime.now());\n\n        return budgetSummaryRepository.save(summary);\n    }\n\n    @Override\n    public BudgetSummary getSummary(Long budgetPlanId) {\n        BudgetPlan plan = budgetPlanRepository.findById(budgetPlanId)\n                .orElseThrow(() -> new BadRequestException("Budget Plan not found"));\n        return budgetSummaryRepository.findByBudgetPlan(plan)\n                .orElseThrow(() -> new BadRequestException("Summary not found"));\n    }\n}\n',
    "src/main/java/com/example/demo/controller/AuthController.java": 'package com.example.demo.controller;\n\nimport com.example.demo.dto.AuthResponse;\nimport com.example.demo.dto.LoginRequest;\nimport com.example.demo.dto.RegisterRequest;\nimport com.example.demo.model.User;\nimport com.example.demo.security.JwtTokenProvider;\nimport com.example.demo.service.UserService;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping("/api/auth")\npublic class AuthController {\n\n    private final AuthenticationManager authenticationManager;\n    private final UserService userService;\n    private final JwtTokenProvider tokenProvider;\n\n    public AuthController(AuthenticationManager authenticationManager, UserService userService, JwtTokenProvider tokenProvider) {\n        this.authenticationManager = authenticationManager;\n        this.userService = userService;\n        this.tokenProvider = tokenProvider;\n    }\n\n    @PostMapping("/register")\n    public ResponseEntity<User> registerUser(@RequestBody RegisterRequest registerRequest) {\n        User user = new User();\n        user.setName(registerRequest.getName());\n        user.setEmail(registerRequest.getEmail());\n        user.setPassword(registerRequest.getPassword());\n        \n        return ResponseEntity.ok(userService.register(user));\n    }\n\n    @PostMapping("/login")\n    public ResponseEntity<AuthResponse> authenticateUser(@RequestBody LoginRequest loginRequest) {\n        Authentication authentication = authenticationManager.authenticate(\n                new UsernamePasswordAuthenticationToken(\n                        loginRequest.getEmail(),\n                        loginRequest.getPassword()\n                )\n        );\n\n        SecurityContextHolder.getContext().setAuthentication(authentication);\n        String jwt = tokenProvider.generateToken(authentication);\n        return ResponseEntity.ok(new AuthResponse(jwt));\n    }\n}\n',
    "src/main/java/com/example/demo/config/OpenApiConfig.java": 'package com.example.demo.config;\n\nimport io.swagger.v3.oas.models.OpenAPI;\nimport io.swagger.v3.oas.models.info.Info;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class OpenApiConfig {\n\n    @Bean\n    public OpenAPI usersMicroserviceOpenAPI() {\n        return new OpenAPI()\n                .info(new Info().title("Personal Finance API")\n                        .description("API for managing personal finances")\n                        .version("1.0"));\n    }\n}\n',
    "src/main/java/com/example/demo/controller/CategoryController.java": 'package com.example.demo.controller;\n\nimport com.example.demo.model.Category;\nimport com.example.demo.service.CategoryService;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping("/api/categories")\npublic class CategoryController {\n\n    private final CategoryService categoryService;\n\n    public CategoryController(CategoryService categoryService) {\n        this.categoryService = categoryService;\n    }\n\n    @PostMapping\n    public ResponseEntity<Category> addCategory(@RequestBody Category category) {\n        return ResponseEntity.ok(categoryService.addCategory(category));\n    }\n\n    @GetMapping\n    public ResponseEntity<List<Category>> getAllCategories() {\n        return ResponseEntity.ok(categoryService.getAllCategories());\n    }\n}\n',
    "src/main/java/com/example/demo/controller/TransactionController.java": 'package com.example.demo.controller;\n\nimport com.example.demo.model.TransactionLog;\nimport com.example.demo.model.User;\nimport com.example.demo.service.TransactionService;\nimport com.example.demo.service.UserService;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping("/api/transactions")\npublic class TransactionController {\n\n    private final TransactionService transactionService;\n    private final UserService userService;\n\n    public TransactionController(TransactionService transactionService, UserService userService) {\n        this.transactionService = transactionService;\n        this.userService = userService;\n    }\n\n    @PostMapping\n    public ResponseEntity<TransactionLog> addTransaction(@RequestBody TransactionLog log, Authentication authentication) {\n        User user = userService.findByEmail(authentication.getName());\n        return ResponseEntity.ok(transactionService.addTransaction(user.getId(), log));\n    }\n\n    @GetMapping\n    public ResponseEntity<List<TransactionLog>> getUserTransactions(Authentication authentication) {\n        User user = userService.findByEmail(authentication.getName());\n        return ResponseEntity.ok(transactionService.getUserTransactions(user.getId()));\n    }\n}\n',
    "src/main/java/com/example/demo/controller/BudgetPlanController.java": 'package com.example.demo.controller;\n\nimport com.example.demo.model.BudgetPlan;\nimport com.example.demo.model.User;\nimport com.example.demo.service.BudgetPlanService;\nimport com.example.demo.service.UserService;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@RequestMapping("/api/budget-plans")\npublic class BudgetPlanController {\n\n    private final BudgetPlanService budgetPlanService;\n    private final UserService userService;\n\n    public BudgetPlanController(BudgetPlanService budgetPlanService, UserService userService) {\n        this.budgetPlanService = budgetPlanService;\n        this.userService = userService;\n    }\n\n    @PostMapping\n    public ResponseEntity<BudgetPlan> createBudgetPlan(@RequestBody BudgetPlan plan, Authentication authentication) {\n        User user = userService.findByEmail(authentication.getName());\n        return ResponseEntity.ok(budgetPlanService.createBudgetPlan(user.getId(), plan));\n    }\n\n    @GetMapping\n    public ResponseEntity<BudgetPlan> getBudgetPlan(@RequestParam Integer month, @RequestParam Integer year, Authentication authentication) {\n        User user = userService.findByEmail(authentication.getName());\n        return ResponseEntity.ok(budgetPlanService.getBudgetPlan(user.getId(), month, year));\n    }\n}\n',
    "src/main/java/com/example/demo/controller/BudgetSummaryController.java": 'package com.example.demo.controller;\n\nimport com.example.demo.model.BudgetSummary;\nimport com.example.demo.service.BudgetSummaryService;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@RequestMapping("/api/budget-summaries")\npublic class BudgetSummaryController {\n\n    private final BudgetSummaryService budgetSummaryService;\n\n    public BudgetSummaryController(BudgetSummaryService budgetSummaryService) {\n        this.budgetSummaryService = budgetSummaryService;\n    }\n\n    @PostMapping("/generate/{planId}")\n    public ResponseEntity<BudgetSummary> generateSummary(@PathVariable Long planId) {\n        return ResponseEntity.ok(budgetSummaryService.generateSummary(planId));\n    }\n\n    @GetMapping("/{planId}")\n    public ResponseEntity<BudgetSummary> getSummary(@PathVariable Long planId) {\n        return ResponseEntity.ok(budgetSummaryService.getSummary(planId));\n    }\n}\n',
    "src/main/java/com/example/demo/servlet/SimpleHelloServlet.java": 'package com.example.demo.servlet;\n\nimport jakarta.servlet.annotation.WebServlet;\nimport jakarta.servlet.http.HttpServlet;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport java.io.IOException;\n\n@WebServlet(urlPatterns = "/simple-hello")\npublic class SimpleHelloServlet extends HttpServlet {\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {\n        resp.getWriter().write("Hello form SimpleHelloServlet");\n    }\n}\n',
    "src/main/java/com/example/demo/DemoApplication.java": 'package com.example.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.web.servlet.ServletComponentScan;\n\n@SpringBootApplication\n@ServletComponentScan\npublic class DemoApplication {\n\n\tpublic static void main(String[] args) {\n\t\tSpringApplication.run(DemoApplication.class, args);\n\t}\n\n}',
}


for file_path, content in files.items():
    directory = os.path.dirname(file_path)
    if directory and not os.path.exists(directory):
        os.makedirs(directory)
    
    with open(file_path, "w", encoding="utf-8") as f:
        f.write(content)
        print(f"Wrote {file_path}")
